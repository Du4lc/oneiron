<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ONEIRON — Inicio</title>
  <style>
    :root{
      --bg:#f9fafb;
      --card:#ffffffee;
      --glass:#ffffffb8;
      --soft:#f3f4f680;
      --stroke:#d1d5db80;
      --text:#0f172a;
      --muted:#6b7280;
      --accent:#4f46e5;
      --accent-2:#2563eb;
      --accent-3:#06b6d4;
      --radius:16px;
      --shadow-xl: 0 10px 30px rgba(20, 24, 60, .12), 0 2px 8px rgba(20,24,60,.08);
      --ring: 0 0 0 6px rgba(79,70,229,.18);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      color:var(--text); background:var(--bg); -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility; overflow-x:hidden;
    }
    .dream-bg{ position:fixed; inset:0; z-index:-2; overflow:hidden;
      background:
        radial-gradient(1200px 520px at 50% -5%, color-mix(in oklab, var(--accent) 22%, transparent), transparent 60%),
        radial-gradient(900px 380px at 15% 100%, color-mix(in oklab, var(--accent-2) 22%, transparent), transparent 60%),
        radial-gradient(700px 300px at 85% 90%, color-mix(in oklab, var(--accent-3) 18%, transparent), transparent 60%),
        linear-gradient(#f9fbff, #f8fafc 60%, #f9fafb);
    }
    .stars,.grain{position:absolute; inset:0; pointer-events:none}
    .stars{ background-image:
      radial-gradient(1px 1px at 10% 20%, rgba(38,38,80,.6) 40%, transparent 41%),
      radial-gradient(1px 1px at 30% 70%, rgba(38,38,80,.5) 40%, transparent 41%),
      radial-gradient(1px 1px at 60% 30%, rgba(38,38,80,.55) 40%, transparent 41%),
      radial-gradient(1.2px 1.2px at 80% 60%, rgba(38,38,80,.45) 40%, transparent 41%),
      radial-gradient(0.9px 0.9px at 50% 85%, rgba(38,38,80,.45) 40%, transparent 41%);
      background-repeat:no-repeat; filter:blur(.2px); opacity:.55; }
    .grain{ mix-blend-mode:soft-light; opacity:.35;
      background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="160" height="160" viewBox="0 0 160 160"><filter id="n"><feTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="2" stitchTiles="stitch"/></filter><rect width="160" height="160" filter="url(%23n)" opacity="0.08"/></svg>');
      background-size:160px 160px; }
    .orb{position:absolute; filter:blur(24px); opacity:.35; border-radius:999px; will-change:transform;}
    .orb.one{width:380px; height:380px; left:-80px; top:10vh; background:radial-gradient(circle at 30% 30%, #93c5fd, transparent 60%)}
    .orb.two{width:420px; height:420px; right:-120px; top:45vh; background:radial-gradient(circle at 70% 40%, #a5b4fc, transparent 60%)}
    .orb.three{width:300px; height:300px; left:55vw; top:-120px; background:radial-gradient(circle at 30% 70%, #67e8f9, transparent 60%)}
    @keyframes drift{0%{transform:translate3d(0,0,0) rotate(0)}50%{transform:translate3d(0,12px,0) rotate(1deg)}100%{transform:translate3d(0,0,0) rotate(0)}}
    .orb{animation:drift 11s ease-in-out infinite}
    header{ position:sticky; top:0; z-index:10; backdrop-filter: blur(10px);
      background:linear-gradient(to bottom, rgba(255,255,255,.75), rgba(255,255,255,.55)); border-bottom:1px solid var(--stroke); }
    .shell{max-width:1100px; margin:0 auto; padding:18px 22px;}
    .brand{display:flex; align-items:center; gap:14px; justify-content:center}
    .brand img{ height:108px; width:auto; object-fit:contain;
      filter: drop-shadow(0 14px 24px rgba(79,70,229,.28)) drop-shadow(0 4px 8px rgba(37,99,235,.18));
      transition:transform .6s cubic-bezier(.2,.8,.2,1); }
    .brand img:hover{transform:translateY(-2px) scale(1.01)}
    main{max-width:1100px; margin:0 auto; padding:0 22px 80px;}
    .toolbar-wrap{position:relative; margin-top:26px}
    .toolbar{
      display:flex; gap:16px; flex-wrap:nowrap; align-items:center;
      margin:0 auto; padding:16px;
      border:1px solid var(--stroke); background:var(--glass); border-radius: calc(var(--radius) + 4px);
      box-shadow: var(--shadow-xl); backdrop-filter: blur(16px) saturate(1.1); position:relative;
      overflow-x:auto; overflow-y:hidden; -ms-overflow-style:none; scrollbar-width:none;
    }
    .toolbar::-webkit-scrollbar{display:none}
    .toolbar:before{
      content:""; position:absolute; inset:-1px; border-radius:inherit; z-index:-1;
      background:conic-gradient(from 180deg at 50% 50%, rgba(79,70,229,.35), rgba(37,99,235,.28), rgba(6,182,212,.25), rgba(79,70,229,.35));
      -webkit-mask: linear-gradient(#000, #000) content-box, linear-gradient(#000, #000);
      -webkit-mask-composite: xor; mask-composite: exclude; padding:1px; opacity:.5;
    }
    .input, select, button{
      border:1px solid var(--stroke);
      background:linear-gradient(180deg, var(--card), var(--soft));
      color:var(--text);
      padding:12px 14px; border-radius:var(--radius);
      outline:none; transition:border-color .15s, background-color .15s, box-shadow .2s, transform .08s;
      box-shadow: 0 1px 0 rgba(0,0,0,.02) inset, 0 6px 14px rgba(15,23,42,.06);
      height:42px;
    }
    .input:focus-visible, select:focus-visible, button:focus-visible{border-color:var(--accent); box-shadow:var(--ring)}
    .input:active, select:active, button:active{transform:translateY(1px)}
    .control{position:relative; flex:1 1 320px; min-width:260px}
    .control svg{position:absolute; left:12px; top:50%; transform:translateY(-50%); pointer-events:none; opacity:.8}
    .control input{padding-left:40px;}
    .tags-btn{display:flex; align-items:center; gap:8px; cursor:pointer; user-select:none; background:linear-gradient(135deg, rgba(79,70,229,.08), rgba(37,99,235,.08));}
    .tags-btn:hover{border-color:color-mix(in oklab, var(--accent) 60%, white 40%); box-shadow:0 10px 18px rgba(79,70,229,.12), inset 0 1px 0 rgba(255,255,255,.6);}
    select{
      appearance:none; padding-right:46px; min-width:180px;
      background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23111827"><path d="M7 10l5 5 5-5"/></svg>');
      background-repeat:no-repeat; background-position:right 12px center; background-size:20px;
    }
    select:disabled{opacity:.55; cursor:not-allowed;}
    .chosen-row{margin-top:10px; padding:0 4px; display:flex; flex-wrap:wrap; gap:8px; align-items:center}
    .chip{ display:inline-flex; align-items:center; gap:8px; border:1px solid var(--stroke); background:linear-gradient(180deg, #fff, #f8fafc); padding:6px 10px; border-radius:999px; font-size:.9rem; }
    .chip .x{ border:0; background:transparent; padding:2px; cursor:pointer; line-height:0; display:grid; place-items:center; }
    .chip .x svg{ opacity:.8 }
    .full-bleed{ width: calc(100vw - 32px); position:relative; left:50%; margin-left: calc(-50vw + 16px); }
    .placeholder{
      position:relative; margin-top:22px; height:56vh; border-radius:22px; display:grid; place-items:center; color:var(--muted);
      background:linear-gradient(180deg, rgba(255,255,255,.85), rgba(248,250,252,.85));
      box-shadow: var(--shadow-xl); border:1px solid var(--stroke); overflow:hidden;
    }
    .placeholder:before{
      content:""; position:absolute; inset:-2px; border-radius:inherit; pointer-events:none;
      background: conic-gradient(from 120deg at 50% 50%, rgba(79,70,229,.16), rgba(37,99,235,.14), rgba(6,182,212,.12), rgba(79,70,229,.16));
      filter:blur(16px); opacity:.65;
    }
    .placeholder p{position:relative; z-index:1}
    .floater{position:absolute; width:140px; height:140px; border-radius:999px; filter:blur(20px); opacity:.35; pointer-events:none}
    .floater.a{right:18px; top:-28px; background:radial-gradient(circle at 30% 40%, #c7d2fe, transparent 60%)}
    .floater.b{left:-28px; bottom:-28px; width:180px; height:180px; background:radial-gradient(circle at 70% 60%, #bae6fd, transparent 60%)}
    .drawer-overlay{ position:fixed; inset:0; background:radial-gradient(1200px 700px at 20% 50%, rgba(79,70,229,.12), transparent 60%), rgba(2,6,23,.28);
      backdrop-filter: blur(3px); opacity:0; pointer-events:none; transition:opacity .25s ease; z-index:20; }
    .drawer{ position:fixed; top:0; left:0; height:100dvh; width:clamp(320px, 33.33vw, 520px); transform:translateX(-102%);
      transition: transform .32s cubic-bezier(.2,.8,.2,1); z-index:21; display:flex; flex-direction:column;
      border-right:1px solid var(--stroke); background:linear-gradient(180deg, var(--card), var(--soft)); box-shadow:var(--shadow-xl); }
    .drawer.open{ transform:translateX(0); }
    .drawer-overlay.open{ opacity:1; pointer-events:auto; }
    .drawer .hd{ display:flex; align-items:center; justify-content:space-between; gap:10px; padding:14px 16px; position:relative; }
    .drawer .hd h2{ font-size:1.05rem; margin:0; letter-spacing:.3px; }
    .drawer .close{ border:1px solid var(--stroke); background:var(--card); border-radius:12px; padding:8px; cursor:pointer; }
    .drawer .content{ padding:12px 12px 18px 12px; overflow:auto; scrollbar-gutter:stable; }
    .picker{ display:grid; grid-template-columns:1fr; gap:12px; }
    .picker label{ display:grid; gap:6px; font-size:.9rem; color:var(--muted); }
    .picker .actions{ display:flex; gap:8px; align-items:center; }
    .picker .add{ background:linear-gradient(135deg, rgba(79,70,229,.95), rgba(37,99,235,.95)); color:#fff; border:0; border-radius:12px; padding:10px 14px; cursor:pointer; box-shadow:0 8px 20px rgba(79,70,229,.22); }
    .drawer .ft{ margin:8px 0 12px; display:flex; align-items:center; justify-content:space-between; gap:10px; padding:0 12px; }
    .ft .summary{ font-size:.9rem; color:var(--muted); }
    .ft .clear{ border:1px solid var(--stroke); background:#fff; border-radius:12px; padding:10px 12px; cursor:pointer; }
    @media (prefers-reduced-motion: reduce){ .orb{animation:none} .brand img{transition:none} .drawer{transition:none} }
    .kbd{font:600 12px ui-monospace, SFMono-Regular, Menlo, monospace; padding:4px 6px; border-radius:8px; border:1px solid var(--stroke); background:#fff}
  </style>
</head>
<body>
  <div class="dream-bg" aria-hidden="true">
    <div class="orb one"></div>
    <div class="orb two"></div>
    <div class="orb three"></div>
    <div class="stars"></div>
    <div class="grain"></div>
  </div>

  <div id="drawer-overlay" class="drawer-overlay" aria-hidden="true"></div>
  <aside id="tags-drawer" class="drawer" role="dialog" aria-modal="true" aria-labelledby="drawer-title" aria-hidden="true">
    <div class="hd">
      <h2 id="drawer-title">Etiquetas por sector</h2>
      <button class="close" id="drawer-close" aria-label="Cerrar">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
      </button>
    </div>
    <div class="content">
      <div class="picker" aria-label="Selector de etiquetas">
        <label>Sector
          <select id="sector-select">
            <option value="" selected disabled>elige un sector…</option>
          </select>
        </label>
        <label>Subsector
          <select id="subsector-select" disabled>
            <option value="" selected>elige un subsector…</option>
          </select>
        </label>
        <div class="actions">
          <button id="add-chip" class="add" type="button">Añadir etiqueta</button>
          <button id="drawer-clear" class="clear" type="button">Limpiar seleccionadas</button>
        </div>
      </div>
    </div>
    <div class="ft">
      <span class="summary" id="drawer-summary">0 etiquetas seleccionadas</span>
    </div>
  </aside>

  <header>
    <div class="shell">
      <div class="brand" aria-label="ONEIRON">
        <img alt="ONEIRON" src="./assets/oneiron.png"/>
      </div>
    </div>
  </header>

  <main>
    <div class="toolbar-wrap">
      <div class="toolbar">
        <label class="control" aria-label="Buscar por nombre de empresa">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
          <input id="search" class="input" type="search" placeholder="nombre empresa" autocomplete="off" />
        </label>

        <button id="add-tags" type="button" class="tags-btn" title="Añadir etiquetas" aria-expanded="false" aria-controls="tags-drawer">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
          <span id="tags-label">etiquetas</span>
        </button>

        <label aria-label="Seleccionar país">
          <select id="country">
            <option value="" selected disabled>país</option>
          </select>
        </label>

        <label aria-label="Seleccionar provincia o estado">
          <select id="region" disabled>
            <option value="" selected>provincia / estado</option>
          </select>
        </label>
      </div>
      <div id="active-tags" class="chosen-row" aria-live="polite"></div>
    </div>

    <!-- Sugerencia eliminada -->

    <section class="placeholder full-bleed">
      <p>Zona de resultados</p>
      <span class="floater a" aria-hidden="true"></span>
      <span class="floater b" aria-hidden="true"></span>
    </section>
  </main>

  <script>
    /* Países y regiones (UE completa + RU detallado + principales mercados globales ya presentes) */
    const data = {
      /* ====== UE ====== */
      "Alemania": [
        "Baden-Wurtemberg","Baviera","Berlín","Brandeburgo","Bremen","Hamburgo","Hesse",
        "Mecklemburgo-Pomerania Occidental","Baja Sajonia","Renania del Norte-Westfalia",
        "Renania-Palatinado","Sarre","Sajonia","Sajonia-Anhalt","Schleswig-Holstein","Turingia"
      ],
      "Austria": [
        "Burgenland","Carintia (Kärnten)","Baja Austria","Alta Austria","Salzburgo",
        "Estiria (Steiermark)","Tirol","Vorarlberg","Viena"
      ],
      "Bélgica": [
        "Bruselas-Capital","Amberes","Brabante Flamenco","Flandes Oriental","Flandes Occidental",
        "Limburgo","Brabante Valón","Hainaut","Lieja","Luxemburgo","Namur"
      ],
      "Bulgaria": [
        "Blagoevgrad","Burgas","Dobrich","Gabrovo","Haskovo","Kardzhali","Kyustendil","Lovech",
        "Montana","Pazardzhik","Pernik","Pleven","Plovdiv","Razgrad","Ruse","Shumen","Silistra",
        "Sliven","Smolyan","Sofía (ciudad)","Sofía (provincia)","Stara Zagora","Targovishte",
        "Varna","Veliko Tarnovo","Vidin","Vratsa","Yambol"
      ],
      "Croacia": [
        "Bjelovar-Bilogora","Brod-Posavina","Dubrovnik-Neretva","Istria","Karlovac",
        "Koprivnica-Križevci","Krapina-Zagorje","Lika-Senj","Međimurje","Osijek-Baranja",
        "Požega-Eslavonia","Primorje-Gorski Kotar","Šibenik-Knin","Sisak-Moslavina",
        "Split-Dalmacia","Varaždin","Virovitica-Podravina","Vukovar-Srijem","Zadar",
        "Condado de Zagreb","Ciudad de Zagreb"
      ],
      "Chipre": [
        "Nicosia","Limasol","Lárnaca","Pafos","Famagusta","Kyrenia"
      ],
      "Chequia": [
        "Praga","Bohemia Central","Bohemia Meridional","Plzeň","Karlovy Vary","Ústí nad Labem",
        "Liberec","Hradec Králové","Pardubice","Vysočina","Moravia Meridional","Olomouc",
        "Zlín","Moravia-Silesia"
      ],
      "Dinamarca": [
        "Región Capital","Selandia","Dinamarca Meridional","Jutlandia Central","Jutlandia Septentrional"
      ],
      "Estonia": [
        "Harju","Hiiu","Ida-Viru","Järva","Jõgeva","Lääne","Lääne-Viru","Põlva","Pärnu",
        "Rapla","Saare","Tartu","Valga","Viljandi","Võru"
      ],
      "Finlandia": [
        "Åland","Carelia del Sur","Ostrobotnia del Sur","Savonia del Sur","Kainuu","Kanta-Häme",
        "Ostrobotnia Central","Finlandia Central","Kymenlaakso","Laponia","Pirkanmaa","Carelia del Norte",
        "Ostrobotnia del Norte","Savonia del Norte","Ostrobotnia","Päijät-Häme","Satakunta","Uusimaa",
        "Finlandia Suroccidental"
      ],
      "Francia": [
        "Auvernia-Ródano-Alpes","Borgoña-Franco Condado","Bretaña","Centre-Val de Loire","Córcega",
        "Gran Este","Hauts-de-France","Isla de Francia","Normandía","Nueva Aquitania","Occitania",
        "Países del Loira","Provenza-Alpes-Costa Azul","Guadalupe","Martinica","Guayana Francesa","Reunión","Mayotte"
      ],
      "Grecia": [
        "Ática","Grecia Central","Macedonia Central","Creta","Macedonia Oriental y Tracia",
        "Epiro","Islas Jónicas","Egeo Septentrional","Peloponeso","Egeo Meridional",
        "Tesalia","Grecia Occidental","Macedonia Occidental"
      ],
      "Hungría": [
        "Budapest","Bács-Kiskun","Baranya","Békés","Borsod-Abaúj-Zemplén","Csongrád-Csanád",
        "Fejér","Győr-Moson-Sopron","Hajdú-Bihar","Heves","Jász-Nagykun-Szolnok",
        "Komárom-Esztergom","Nógrád","Pest","Somogy","Szabolcs-Szatmár-Bereg",
        "Tolna","Vas","Veszprém","Zala"
      ],
      "Irlanda": [
        "Carlow","Cavan","Clare","Cork","Donegal","Dublín","Galway","Kerry","Kildare","Kilkenny",
        "Laois","Leitrim","Limerick","Longford","Louth","Mayo","Meath","Monaghan","Offaly","Roscommon",
        "Sligo","Tipperary","Waterford","Westmeath","Wexford","Wicklow"
      ],
      "Italia": [
        "Abruzos","Basilicata","Calabria","Campania","Emilia-Romaña","Friuli-Venecia Julia","Lacio","Liguria","Lombardía",
        "Marcas","Molise","Piamonte","Apulia (Puglia)","Cerdeña","Sicilia","Toscana","Trentino-Alto Adigio","Umbría",
        "Valle de Aosta","Véneto"
      ],
      "Letonia": [
        "Región de Riga","Vidzeme","Latgale","Kurzeme","Zemgale"
      ],
      "Lituania": [
        "Alytus","Kaunas","Klaipėda","Marijampolė","Panevėžys","Šiauliai","Tauragė","Telšiai","Utena","Vilna"
      ],
      "Luxemburgo": [
        "Capellen","Clervaux","Diekirch","Echternach","Esch-sur-Alzette","Grevenmacher",
        "Luxemburgo","Mersch","Redange","Remich","Vianden","Wiltz"
      ],
      "Malta": [
        "Central","Gozo","Norte","Suroriental","Sur"
      ],
      "Países Bajos": [
        "Drenthe","Flevolanda","Frisia","Güeldres","Groninga","Holanda Meridional","Holanda Septentrional",
        "Limburgo","Brabante Septentrional","Utrecht","Overijssel","Zelanda"
      ],
      "Polonia": [
        "Baja Silesia","Cuyavia y Pomerania","Gran Polonia","Pequeña Polonia","Łódź","Lubusz",
        "Lublin","Masovia","Opole","Podlaquia","Pomerania","Silesia","Subcarpacia",
        "Santa Cruz (Świętokrzyskie)","Varmia y Masuria","Pomerania Occidental"
      ],
      "Portugal": [
        "Aveiro","Beja","Braga","Braganza","Castelo Branco","Coímbra","Évora","Faro","Guarda","Leiría",
        "Lisboa","Portalegre","Oporto","Santarém","Setúbal","Viana do Castelo","Vila Real","Viseu",
        "Azores","Madeira"
      ],
      "Rumanía": [
        "Alba","Arad","Argeș","Bacău","Bihor","Bistrița-Năsăud","Botoșani","Brașov","Brăila","Bucarest",
        "Buzău","Călărași","Caraș-Severin","Cluj","Constanța","Covasna","Dâmbovița","Dolj","Galați","Giurgiu",
        "Gorj","Harghita","Hunedoara","Ialomița","Iași","Ilfov","Maramureș","Mehedinți","Mureș","Neamț","Olt",
        "Prahova","Sălaj","Satu Mare","Sibiu","Suceava","Teleorman","Timiș","Tulcea","Vâlcea","Vaslui","Vrancea"
      ],
      "Eslovaquia": [
        "Bratislava","Trnava","Trenčín","Nitra","Žilina","Banská Bystrica","Prešov","Košice"
      ],
      "Eslovenia": [
        "Eslovenia Central","Alta Carniola","Savinja","Drava","Carintia","Litoral-Interior",
        "Goriška","Litoral-Karst","Eslovenia Sudoriental","Baja Savinja","Cuenca Central","Mura"
      ],
      "España": [
        "A Coruña","Álava","Albacete","Alicante","Almería","Asturias","Ávila","Badajoz","Illes Balears",
        "Barcelona","Burgos","Cáceres","Cádiz","Cantabria","Castellón","Ciudad Real","Córdoba","Cuenca","Girona",
        "Granada","Guadalajara","Gipuzkoa","Huelva","Huesca","Jaén","La Rioja","Las Palmas","León","Lleida","Lugo",
        "Madrid","Málaga","Murcia","Navarra","Ourense","Palencia","Pontevedra","Salamanca","Santa Cruz de Tenerife",
        "Segovia","Sevilla","Soria","Tarragona","Teruel","Toledo","Valencia","Valladolid","Bizkaia","Zamora","Zaragoza",
        "Ceuta","Melilla"
      ],
      "Suecia": [
        "Blekinge","Dalarna","Gävleborg","Gotland","Halland","Jämtland","Jönköping","Kalmar","Kronoberg",
        "Norrbotten","Örebro","Östergötland","Skåne","Södermanland","Estocolmo","Uppsala","Värmland",
        "Västerbotten","Västernorrland","Västmanland","Västra Götaland"
      ],

      /* ====== Reino Unido (detalle) ====== */
      "Reino Unido": [
        /* — Inglaterra (condados ceremoniales) — */
        "Bedfordshire","Berkshire","Bristol","Buckinghamshire","Cambridgeshire","Cheshire","City of London",
        "Cornualles (Cornwall)","Condado de Durham","Cumbria","Derbyshire","Devon","Dorset",
        "East Riding of Yorkshire","East Sussex","Essex","Gloucestershire","Gran Londres (Greater London)",
        "Gran Mánchester (Greater Manchester)","Hampshire","Herefordshire","Hertfordshire","Isla de Wight",
        "Kent","Lancashire","Leicestershire","Lincolnshire","Merseyside","Norfolk","North Yorkshire",
        "Northamptonshire","Northumberland","Nottinghamshire","Oxfordshire","Rutland","Shropshire","Somerset",
        "South Yorkshire","Staffordshire","Suffolk","Surrey","Tyne and Wear","Warwickshire","West Midlands",
        "West Sussex","West Yorkshire","Wiltshire","Worcestershire",
        /* — Escocia (32 council areas) — */
        "Aberdeen City","Aberdeenshire","Angus","Argyll and Bute","City of Edinburgh","Clackmannanshire",
        "Dumfries and Galloway","Dundee City","East Ayrshire","East Dunbartonshire","East Lothian",
        "East Renfrewshire","Falkirk","Fife","Glasgow City","Highland","Inverclyde","Midlothian","Moray",
        "Na h-Eileanan Siar (Western Isles)","North Ayrshire","North Lanarkshire","Islas Orcadas (Orkney Islands)",
        "Perth and Kinross","Renfrewshire","Scottish Borders","Islas Shetland (Shetland Islands)",
        "South Ayrshire","South Lanarkshire","Stirling","West Dunbartonshire","West Lothian",
        /* — Gales (22 áreas principales) — */
        "Blaenau Gwent","Bridgend","Caerphilly","Cardiff","Carmarthenshire","Ceredigion","Conwy","Denbighshire",
        "Flintshire","Gwynedd","Isla de Anglesey","Merthyr Tydfil","Monmouthshire","Neath Port Talbot","Newport",
        "Pembrokeshire","Powys","Rhondda Cynon Taf","Swansea","Torfaen","Vale of Glamorgan","Wrexham",
        /* — Irlanda del Norte (11 distritos) — */
        "Antrim and Newtownabbey","Ards and North Down","Armagh City, Banbridge and Craigavon","Belfast",
        "Causeway Coast and Glens","Derry City and Strabane","Fermanagh and Omagh","Lisburn and Castlereagh",
        "Mid and East Antrim","Mid Ulster","Newry, Mourne and Down"
      ],

      /* ====== Otros mercados globales ya presentes ====== */
      "Estados Unidos": [
        "Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","Florida","Georgia",
        "Hawái","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Luisiana","Maine","Maryland","Massachusetts",
        "Míchigan","Minnesota","Misisipi","Misuri","Montana","Nebraska","Nevada","Nuevo Hampshire","Nueva Jersey",
        "Nuevo México","Nueva York","Carolina del Norte","Dakota del Norte","Ohio","Oklahoma","Oregón","Pensilvania",
        "Rhode Island","Carolina del Sur","Dakota del Sur","Tennessee","Texas","Utah","Vermont","Virginia","Washington",
        "Virginia Occidental","Wisconsin","Wyoming","Distrito de Columbia"
      ],
      "Canadá": [
        "Alberta","Columbia Británica","Manitoba","Nuevo Brunswick","Terranova y Labrador","Nueva Escocia","Ontario",
        "Isla del Príncipe Eduardo","Quebec","Saskatchewan","Yukón","Territorios del Noroeste","Nunavut"
      ],
      "México": [
        "Aguascalientes","Baja California","Baja California Sur","Campeche","Coahuila de Zaragoza","Colima","Chiapas",
        "Chihuahua","Ciudad de México","Durango","Guanajuato","Guerrero","Hidalgo","Jalisco","México",
        "Michoacán de Ocampo","Morelos","Nayarit","Nuevo León","Oaxaca","Puebla","Querétaro","Quintana Roo",
        "San Luis Potosí","Sinaloa","Sonora","Tabasco","Tamaulipas","Tlaxcala",
        "Veracruz de Ignacio de la Llave","Yucatán","Zacatecas"
      ],
      "Brasil": [
        "Acre","Alagoas","Amapá","Amazonas","Bahía","Ceará","Distrito Federal","Espírito Santo","Goiás","Maranhão",
        "Mato Grosso","Mato Grosso del Sur","Minas Gerais","Pará","Paraíba","Paraná","Pernambuco","Piauí","Río de Janeiro",
        "Río Grande del Norte","Río Grande del Sur","Rondônia","Roraima","Santa Catarina","São Paulo","Sergipe","Tocantins"
      ],
      "Japón": [
        "Hokkaidō","Aomori","Iwate","Miyagi","Akita","Yamagata","Fukushima","Ibaraki","Tochigi","Gunma","Saitama",
        "Chiba","Tokio","Kanagawa","Niigata","Toyama","Ishikawa","Fukui","Yamanashi","Nagano","Gifu","Shizuoka",
        "Aichi","Mie","Shiga","Kioto","Osaka","Hyōgo","Nara","Wakayama","Tottori","Shimane","Okayama","Hiroshima",
        "Yamaguchi","Tokushima","Kagawa","Ehime","Kōchi","Fukuoka","Saga","Nagasaki","Kumamoto","Ōita","Miyazaki",
        "Kagoshima","Okinawa"
      ],
      "China": [
        "Anhui","Fujian","Gansu","Guangdong","Guizhou","Hainan","Hebei","Heilongjiang","Henan","Hubei","Hunan","Jiangsu",
        "Jiangxi","Jilin","Liaoning","Qinghai","Shaanxi","Shandong","Shanxi","Sichuan","Yunnan","Zhejiang",
        "Guangxi (Región autónoma)","Mongolia Interior (Región autónoma)","Ningxia (Región autónoma)",
        "Tíbet (Región autónoma)","Xinjiang (Región autónoma)","Pekín (Municipio)","Chongqing (Municipio)",
        "Shanghái (Municipio)","Tianjin (Municipio)","Hong Kong (RAE)","Macao (RAE)"
      ],
      "India": [
        "Andhra Pradesh","Arunachal Pradesh","Assam","Bihar","Chhattisgarh","Goa","Guyarat (Gujarat)","Haryana",
        "Himachal Pradesh","Jharkhand","Karnataka","Kerala","Madhya Pradesh","Maharashtra","Manipur","Meghalaya",
        "Mizoram","Nagaland","Odisha","Punyab (Punjab)","Rajastán","Sikkim","Tamil Nadu","Telangana","Tripura",
        "Uttar Pradesh","Uttarakhand","Bengala Occidental",
        "Andamán y Nicobar (UT)","Chandigarh (UT)","Dadra y Nagar Haveli y Damán y Diu (UT)","Delhi (UT)",
        "Jammu y Cachemira (UT)","Ladakh (UT)","Lakshadweep (UT)","Puducherry (UT)"
      ],
      "Corea del Sur": [
        "Seúl (Ciudad Especial)","Busan","Daegu","Incheon","Gwangju","Daejeon","Ulsan","Sejong (Ciudad)","Gyeonggi",
        "Gangwon","Chungcheong del Norte","Chungcheong del Sur","Jeolla del Norte","Jeolla del Sur",
        "Gyeongsang del Norte","Gyeongsang del Sur","Jeju"
      ],
      "Suiza": [
        "Zúrich","Berna","Lucerna","Uri","Schwyz","Obwalden","Nidwalden","Glaris","Zug","Friburgo","Soleura","Basilea-Ciudad",
        "Basilea-Campiña","Schaffhausen","Appenzell Rodas Exteriores","Appenzell Rodas Interiores","San Galo","Graubünden",
        "Argovia","Turgovia","Tesino","Vaud","Valais","Neuchâtel","Ginebra","Jura"
      ],
      "Emiratos Árabes Unidos": [
        "Abu Dabi","Dubái","Sharjah","Ajmán","Umm al-Qaywayn","Ras al-Jaima","Fujairah"
      ],
      "Arabia Saudí": [
        "Riad","La Meca","Medina","Qasim","Provincia Oriental","Asir","Tabuk","Hail","Frontera Norte","Jazan",
        "Najrán","Al Bahah","Al Jawf"
      ],
      "Singapur": ["Singapur"],
      "Sudáfrica": [
        "Cabo Occidental","Cabo Oriental","Cabo del Norte","Estado Libre","Gauteng","KwaZulu-Natal",
        "Limpopo","Mpumalanga","Noroeste"
      ]
    };

    const country = document.getElementById('country');
    const region = document.getElementById('region');
    const searchInput = document.getElementById('search');

    // Rellenar países
    Object.keys(data).sort().forEach(p => {
      const opt = document.createElement('option');
      opt.value = p; opt.textContent = p; country.appendChild(opt);
    });

    // Al elegir país -> habilitar y poblar regiones
    country.addEventListener('change', () => {
      const sel = country.value;
      region.innerHTML = '<option value="" selected>provincia / estado</option>';
      if (!sel){ region.disabled = true; return; }
      data[sel].forEach(r => {
        const o = document.createElement('option');
        o.value = r; o.textContent = r; region.appendChild(o);
      });
      region.disabled = false;
    });

    /* ==== Drawer de etiquetas (selects dependientes) ==== */
    const drawer = document.getElementById('tags-drawer');
    const overlay = document.getElementById('drawer-overlay');
    const tagsBtn = document.getElementById('add-tags');
    const drawerClose = document.getElementById('drawer-close');
    const drawerSummary = document.getElementById('drawer-summary');
    const tagsLabel = document.getElementById('tags-label');
    const activeTags = document.getElementById('active-tags');

    const sectorSelect = document.getElementById('sector-select');
    const subSelect = document.getElementById('subsector-select');
    const addChipBtn = document.getElementById('add-chip');
    const clearBtn = document.getElementById('drawer-clear');

    const sectors = {
      "Agricultura, ganadería, silvicultura y pesca": [
        "Cultivos","Ganadería","Servicios agrarios","Silvicultura","Pesca"
      ],
      "Industrias extractivas": [
        "Petróleo y gas","Minerales metálicos","Minerales no metálicos"
      ],
      "Industria manufacturera": [
        "Alimentación","Textil y calzado","Química","Farmacéutica y biotecnología",
        "Materiales de construcción","Metalurgia","Electrónica y semiconductores",
        "Material eléctrico","Maquinaria industrial","Automoción",
        "Transporte avanzado","Muebles y manufacturas","Instrumentos médicos"
      ],
      "Energía": [
        "Fotovoltaica","Eólica","Hidráulica","Biomasa","Nuclear","Gas",
        "Hidrógeno","Almacenamiento energético","Distribución eléctrica"
      ],
      "Agua, residuos y saneamiento": [
        "Agua","Aguas residuales","Residuos y reciclaje","Gestión ambiental"
      ],
      "Construcción": [
        "Edificación","Ingeniería civil","Instalaciones y reformas"
      ],
      "Comercio": [
        "Mayorista alimentos","Mayorista industriales","Minorista alimentos",
        "Minorista consumo","Vehículos y combustibles","Comercio electrónico"
      ],
      "Transporte y almacenamiento": [
        "Transporte terrestre","Transporte marítimo","Transporte aéreo",
        "Logística","Mensajería"
      ],
      "Hostelería": [
        "Hoteles y alojamientos","Restauración","Catering"
      ],
      "Información, comunicación y tecnología": [
        "Telecomunicaciones","Software","Inteligencia artificial","Big Data",
        "Ciberseguridad","Cloud","Plataformas digitales","Medios",
        "Audiovisual","Videojuegos"
      ],
      "Finanzas y seguros": [
        "Banca","Fintech","Seguros","Capital riesgo","Inversión"
      ],
      "Inmobiliario": [
        "Inmobiliario","Proptech"
      ],
      "Profesionales, científicas y técnicas": [
        "Jurídico y contable","Consultoría empresarial","Consultoría tecnológica",
        "Ingeniería y arquitectura","I+D+i","Marketing","Diseño y creatividad"
      ],
      "Educación": [
        "Educación superior","Formación profesional","Formación online"
      ],
      "Sanidad y servicios sociales": [
        "Sanidad","Biomedicina","Salud digital","Servicios sociales"
      ],
      "Cultura, deportes y ocio": [
        "Artes","Cine","Música","Videojuegos","Deportes","Fitness",
        "Turismo cultural","Ocio nocturno","Recreación"
      ],
      "Otros servicios": [
        "Asociaciones","ONGs","Sindicatos","Servicios personales"
      ]
    };

    const selected = new Set();

    function populateSectors(){
      sectorSelect.innerHTML = '<option value="" selected disabled>elige un sector…</option>';
      Object.keys(sectors).forEach(s => {
        const o = document.createElement('option'); o.value = s; o.textContent = s; sectorSelect.appendChild(o);
      });
      subSelect.innerHTML = '<option value="" selected>elige un subsector…</option>';
      subSelect.disabled = true;
    }
    populateSectors();

    sectorSelect.addEventListener('change', ()=>{
      const s = sectorSelect.value;
      subSelect.innerHTML = '<option value="" selected>elige un subsector…</option>';
      if(!s){ subSelect.disabled = true; return; }
      sectors[s].forEach(sub => {
        const o = document.createElement('option'); o.value = sub; o.textContent = sub; subSelect.appendChild(o);
      });
      subSelect.disabled = false;
      subSelect.focus();
    });

    function renderActiveTags(){
      activeTags.innerHTML = '';
      selected.forEach(tag => {
        const chip = document.createElement('span');
        chip.className = 'chip';
        chip.innerHTML = `${tag} <button class="x" aria-label="Quitar ${tag}" data-tag="${tag}">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
        </button>`;
        activeTags.appendChild(chip);
      });
    }

    function updateSummary(){
      const n = selected.size;
      drawerSummary.textContent = `${n} etiqueta${n!==1?'s':''} seleccionada${n!==1?'s':''}`;
      tagsLabel.textContent = n ? `etiquetas (${n})` : 'etiquetas';
    }

    function addCurrentSelection(){
      const sector = sectorSelect.value;
      const sub = subSelect.value;
      if(!sector || !sub) return;
      const label = `${sector}: ${sub}`;
      if(!selected.has(label)){
        selected.add(label);
        renderActiveTags();
        updateSummary();
      }
    }

    addChipBtn.addEventListener('click', addCurrentSelection);

    activeTags.addEventListener('click', (e)=>{
      const btn = e.target.closest('button.x');
      if(!btn) return;
      const tag = btn.getAttribute('data-tag');
      selected.delete(tag);
      renderActiveTags();
      updateSummary();
    });

    clearBtn.addEventListener('click', ()=>{
      selected.clear();
      renderActiveTags();
      updateSummary();
    });

    function openDrawer(){
      drawer.classList.add('open');
      overlay.classList.add('open');
      drawer.removeAttribute('aria-hidden');
      overlay.removeAttribute('aria-hidden');
      tagsBtn.setAttribute('aria-expanded', 'true');
      setTimeout(()=>{ sectorSelect.focus(); }, 60);
    }
    function closeDrawer(){
      drawer.classList.remove('open');
      overlay.classList.remove('open');
      drawer.setAttribute('aria-hidden','true');
      overlay.setAttribute('aria-hidden','true');
      tagsBtn.setAttribute('aria-expanded', 'false');
      tagsBtn.focus();
    }

    tagsBtn.addEventListener('click', () => {
      tagsBtn.animate(
        [{ transform:'translateY(0) scale(1)' },{ transform:'translateY(1px) scale(0.98)' },{ transform:'translateY(0) scale(1)' }],
        { duration:220, easing:'ease-out' }
      );
      openDrawer();
    });
    document.getElementById('drawer-close').addEventListener('click', closeDrawer);
    overlay.addEventListener('click', closeDrawer);

    window.addEventListener('keydown', (e)=>{
      if(e.key === 'Escape' && drawer.classList.contains('open')){ closeDrawer(); }
      if(e.key === 'Enter' && drawer.classList.contains('open')){ addCurrentSelection(); }
    });

    // Atajo para enfocar el buscador (sin mostrar sugerencia en UI)
    window.addEventListener('keydown', (e) => {
      if(e.key === '/' && !/input|textarea/i.test(document.activeElement.tagName) && !drawer.classList.contains('open')){
        e.preventDefault();
        searchInput.focus();
      }
    });

    // Parallax sutil
    const orbs = Array.from(document.querySelectorAll('.orb'));
    let raf = 0;
    const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
    function onMove(x, y){
      orbs.forEach((el, i)=>{
        const depth = (i+1) * 0.015;
        el.style.transform = `translate3d(${(x-0.5)*30*depth}px, ${(y-0.5)*30*depth}px, 0)`;
      });
    }
    function handlePointer(evt){
      if(prefersReduced) return;
      const { innerWidth:w, innerHeight:h } = window;
      const x = (evt.clientX ?? (evt.touches?.[0]?.clientX || w/2)) / w;
      const y = (evt.clientY ?? (evt.touches?.[0]?.clientY || h/2)) / h;
      cancelAnimationFrame(raf);
      raf = requestAnimationFrame(()=>onMove(x,y));
    }
    window.addEventListener('pointermove', handlePointer, { passive:true });
    window.addEventListener('touchmove', handlePointer, { passive:true });
  </script>
</body>
</html>
